<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

</head><body><dom-module id="user-location">
  <script>Polymer({is:"user-location",properties:{latitude:{type:Number,notify:!0,readOnly:!0},longitude:{type:Number,notify:!0,readOnly:!0},active:{type:Boolean,value:!1},error:{type:String,notify:!0},_watchId:{type:Number},highAccuracy:{type:Boolean,value:!1,observer:"_updateWatchLocation"},watch:{type:Boolean,value:!0,observer:"_updateWatchLocation"}},ready:function(){"geolocation"in navigator?this._updateWatchLocation():(alert("Geolocation not available on this device."),console.log("Geolocation not available"))},_updateWatchLocation:function(){var o={enableHighAccuracy:this.highAccuracy};this._clearAnyExistingWatches(),this.watch&&(navigator.geolocation.getCurrentPosition(this._updatePosition(),this._onError(),o),this._watchId=navigator.geolocation.watchPosition(this._onPositionChanged(),this._onError(),o))},_clearAnyExistingWatches:function(){this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null)},_onError:function(o){var t=this;return function(o){switch(o.code){case o.PERMISSION_DENIED:t.error="Permission denied";break;case o.POSITION_UNAVAILABLE:t.error="Position unavailable";break;case o.TIMEOUT:t.error="Timeout";break;case o.UNKNOWN_ERROR:t.error="Unknown error"}console.log("Geolocation error("+o.code+"): "+t.error)}},_onPositionChanged:function(){var o=this;return function(t){o.active?o._updatePosition()(t):console.log("Ignoring location change; inactive")}},_updatePosition:function(){var o=this;return function(t){var e=t.coords;o._setLatitude(e.latitude),o._setLongitude(e.longitude),console.log("Latitude is ",o.latitude," and longitude is ",o.longitude),o.error=""}}});</script>
</dom-module></body></html>